<ion-header class="ion-no-border">
  <app-header></app-header>
</ion-header>

<ion-content>
  <div class="container">
    <div *ngFor="let section of documents">
      <h2>{{ section.category }}</h2>

      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" *ngFor="let file of section.files">
            <ion-card (click)="viewFile(file)">
              <ion-card-content>
                <div class="file-row">
                  <img [src]="file.imageUrl" />

                  <div>
                    <h3>{{ file.name }}</h3>
                    <p>{{ file.size }} | {{ file.format }}</p>
                  </div>

                  <ion-icon name="eye-outline"></ion-icon>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>

  <app-footer></app-footer>
</ion-content>

<!-- âœ… REAL IONIC MODAL IMAGE VIEWER -->
<ion-modal [isOpen]="isViewerOpen" (didDismiss)="closeViewer()">
  <ng-template>
    <div class="document-viewer-overlay">
      <div class="viewer-header">
        <h3>{{ selectedDocName }}</h3>
        <ion-button (click)="closeViewer()" fill="clear" color="light">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
      </div>

      <div class="viewer-content">
        <img
          [src]="selectedImageUrl"
          alt="{{ selectedDocName }}"
          style="max-width: 100%; max-height: 100%; object-fit: contain"
        />
      </div>
    </div>
  </ng-template>
</ion-modal>
