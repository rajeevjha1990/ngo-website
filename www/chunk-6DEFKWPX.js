import{a as _t,b as bt}from"./chunk-6E4FWMQ4.js";import{a as ft}from"./chunk-YHL4P7M2.js";import{$,A as x,Ba as ht,C as J,D as W,E as q,Ea as ut,Ga as gt,Ha as O,Ia as yt,K as X,L as G,O as R,P as N,Q as K,Y as Q,Z as Y,_ as Z,a as b,aa as tt,ba as E,d as p,f as L,g as U,ga as et,ia as it,ja as nt,ka as ot,l as y,la as at,m as P,ma as rt,n as H,p as F,pa as st,q as S,r as s,ra as lt,s as r,sa as ct,t as h,ta as mt,u as V,v as z,va as pt,w as k,y as l,za as dt}from"./chunk-G3HJZ3PM.js";import"./chunk-DTATBPVL.js";import"./chunk-QUJFQN2Y.js";import"./chunk-X224L3SO.js";import"./chunk-C32O5GX5.js";import"./chunk-52TO42VW.js";import"./chunk-SEUP4ZMM.js";import"./chunk-DRMA3MWZ.js";import"./chunk-RUKPWWTB.js";import"./chunk-4KS6YN45.js";import"./chunk-QNCTVU3D.js";import"./chunk-ZIZQO6BN.js";import"./chunk-YXDY66DN.js";import"./chunk-64IMJK5F.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-WCS4JO7P.js";import"./chunk-CKP3SGE2.js";import"./chunk-GIMRDFJ3.js";import"./chunk-CI7KQTBV.js";import"./chunk-ELFU6LLF.js";import"./chunk-WO4BVH6B.js";import"./chunk-BUMCRR6Y.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as T,b as B,h as o}from"./chunk-B7O3QC5Z.js";var wt="http://localhost/SVJ-API/public/",Ct="https://sabkavikasjayti.org/API/public/",vt="api/",It="publicApi/";var xt=(()=>{let i=class i{constructor(t){this.storage=t,this._storage=null,this.formData=null,this.init()}init(){return o(this,null,function*(){this._storage=yield this.storage.create()})}set(t,e){return o(this,null,function*(){yield this._storage?.set(t,e)})}get(t){return o(this,null,function*(){let e=5;for(;!this._storage&&e>0;)e--,yield this.delay(500);return yield this._storage?.get(t)})}clear(){return o(this,null,function*(){yield this._storage?.clear()})}remove(t){return o(this,null,function*(){yield this._storage?.remove(t)})}delay(t){return new Promise(e=>setTimeout(e,t))}setFormData(t){return o(this,null,function*(){yield this._storage?.set("formData",t)})}getFormData(){return o(this,null,function*(){return yield this._storage?.get("formData")})}clearFormData(){return o(this,null,function*(){yield this._storage?.remove("formData")})}};i.\u0275fac=function(e){return new(e||i)(p(ft))},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var Pt=(()=>{let i=class i{constructor(t){this.storageServ=t,this.authkey="",this.getAuthkey()}setAuthkey(t){return o(this,null,function*(){this.authkey=t,yield this.storageServ.set("Authkey",t)})}getAuthkey(){return o(this,null,function*(){return this.authkey||(this.authkey=yield this.storageServ.get("Authkey")),this.authkey})}clear(){return o(this,null,function*(){yield this.storageServ.clear(),this.authkey=""})}};i.\u0275fac=function(e){return new(e||i)(p(xt))},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var St=(()=>{let i=class i{constructor(t,e,a,f,_,u){this.plt=t,this.http=e,this.alertCtrl=a,this.loadingCtrl=f,this.navCtrl=_,this.authServ=u,this.BASE_URL="",this.BASE_API_URL="",this.UPLOADS="",this.authkey="",this.i=0,this.loadingElements=[],window.location.href.indexOf("localhost")<0||this.plt.is("android")||this.plt.is("ios")?this.BASE_URL=Ct:this.BASE_URL=wt,this.BASE_API_URL=this.BASE_URL+vt,this.UPLOADS=this.BASE_URL}init(){return o(this,null,function*(){this.authkey=yield this.authServ.getAuthkey()})}post(u,Et){return o(this,arguments,function*(t,e,a={},f=!0,_="urlencoded"){this.i++;let v=this.i;f&&(yield this.presentLoading(v)),t=this.BASE_API_URL+t;let d="",w;switch(_){case"urlencoded":d="application/x-www-form-urlencoded",w=new N({fromObject:e});break;case"multipart":d="";let c=new FormData;Object.entries(e).forEach(([m,C])=>c.append(m,C)),w=c;break;case"json":d="application/json",w=JSON.stringify(e);break}this.authkey||(yield this.init());let j=localStorage.getItem("auth_token")||"",D=new R({Source:"app",Authorization:`Bearer ${j}`,VeronAuthkey:this.authkey||""});d&&(D=D.set("Content-Type",d));let Ot={headers:D,observe:"response"},I={};try{let c=yield this.http.post(t,w,Ot).toPromise();if(c.status===200){let m=c.body;m.status=200,f&&m.msg&&this.presentAlert("",m.msg,"Success"),m.VeronAuthkey&&(this.authServ.setAuthkey(m.VeronAuthkey),this.authkey=m.VeronAuthkey),I=m}else this.presentAlert("Code: "+c.status,"Unexpected status code"),I=c.body||{},I.status=c.status}catch(c){let m=c.status;console.log(m);let C="Unidentified error, contact to admin.";try{C=c.error?.err||c.error?.msg||C}catch{}switch(typeof C=="object"&&(C=Object.values(C).join(`
`)),m){case 500:this.presentAlert("Server Error");break;case 404:this.presentAlert("API Not Found");break;case 401:this.presentAlert("Authorization Error","Mobile number not registered"),this.authServ.clear(),this.navCtrl.navigateRoot("/");break;default:let A="Unidentified error,contact  to admin.";try{A=c.error?.err||c.error?.msg||A}catch{}typeof A=="object"&&(A=Object.values(A).join(`
`)),this.presentAlert(A);break}I=c.error||{},I.status=m}return f&&this.loadingElements[v]&&this.loadingElements[v].dismiss(),I})}presentLoading(t){return o(this,null,function*(){this.loadingElements[t]=yield this.loadingCtrl.create({message:"Please wait...",spinner:"crescent"}),yield this.loadingElements[t].present()})}presentAlert(){return o(this,arguments,function*(t="",e="",a,f=["Ok"]){if(!a){let u=(e||t).toLowerCase();u.includes("not available")?a="Coupon Unavailable":u.includes("authorization")?a="Authorization Error":u.includes("required")?a="Validation Error":u.includes("server")?a="Server Error":u.includes("not found")?a="Not Found":a="Alert"}let _=yield this.alertCtrl.create({header:a,subHeader:t,message:e,buttons:f});yield _.present(),a!=="Error"&&a!=="Alert"&&setTimeout(()=>_.dismiss(),2e3)})}downloadFile(a){return o(this,arguments,function*(t,e={}){if(!navigator.onLine){this.presentAlert("No Internet Connection","Please check your internet connection and try again.");return}let f=new R().set("VeronAuthkey",this.authkey),_=new N({fromObject:e});this.http.get(this.BASE_API_URL+t,{headers:f,params:_,responseType:"blob"}).subscribe(u=>{let Et=u.type,v=[];v.push(u);let d=document.createElement("a");d.href=window.URL.createObjectURL(new Blob(v,{type:Et}));let w=t.split("/"),j=w[w.length-1];d.setAttribute("download",j),d.setAttribute("target","_blank"),document.body.appendChild(d),d.click()})})}};i.\u0275fac=function(e){return new(e||i)(p(tt),p(K),p(O),p(yt),p(E),p(Pt))},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var kt=(()=>{let i=class i{constructor(t){this.svjHttp=t}applyProgram(t){return o(this,null,function*(){let e=It+"apply_program";return yield this.svjHttp.post(e,t)})}};i.\u0275fac=function(e){return new(e||i)(p(St))},i.\u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function Rt(n,i){if(n&1){let g=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),l(3,"Confirm Your Order"),r(),s(4,"ion-card-subtitle"),l(5,"Please review your details before placing the order."),r()(),s(6,"ion-card-content")(7,"div",3)(8,"p")(9,"b"),l(10,"Name:"),r(),l(11),r(),s(12,"p")(13,"b"),l(14,"Mobile:"),r(),l(15),r(),s(16,"p")(17,"b"),l(18,"Address:"),r(),l(19),r()(),s(20,"div",4)(21,"p"),l(22,"Total Payable Amount"),r(),s(23,"h1",5),l(24),r()(),s(25,"ion-radio-group",6),q("ngModelChange",function(e){L(g);let a=k();return W(a.payment_mode,e)||(a.payment_mode=e),U(e)}),s(26,"ion-list-header")(27,"ion-label"),l(28,"Select Payment Mode"),r()(),s(29,"ion-item"),h(30,"ion-icon",7),s(31,"ion-label"),l(32,"Cash on Delivery"),r(),h(33,"ion-radio",8),r(),s(34,"ion-item"),h(35,"ion-icon",9),s(36,"ion-label"),l(37,"UPI / QR"),r(),h(38,"ion-radio",10),r(),s(39,"ion-item"),h(40,"ion-icon",11),s(41,"ion-label"),l(42,"Debit / Credit Card"),r(),h(43,"ion-radio",12),r()(),s(44,"ion-button",13),z("click",function(){L(g);let e=k();return U(e.confirmOrder())}),h(45,"ion-icon",14),l(46," Confirm & Place Order "),r()()()}if(n&2){let g=k();y(11),x(" ",g.applyData.name),y(4),x(" ",g.applyData.mobile),y(4),x(" ",g.applyData.address),y(5),x("\u20B9",g.MIN_AMOUNT),y(),J("ngModel",g.payment_mode),y(19),S("disabled",!g.payment_mode)}}function Nt(n,i){n&1&&(s(0,"div",15),h(1,"ion-spinner",16),s(2,"p"),l(3,"Loading order details..."),r()())}var te=(()=>{let i=class i{constructor(t,e,a){this.alertCtrl=t,this.navCtrl=e,this.programServ=a,this.MIN_AMOUNT=300,this.applyData=null,this.payment_mode="COD"}ngOnInit(){let t=localStorage.getItem("program_apply_data");if(!t){this.navCtrl.navigateBack("/program");return}this.applyData=JSON.parse(t),console.log(this.applyData)}confirmOrder(){return o(this,null,function*(){if(!this.payment_mode){yield this.showAlert("Please select payment method.");return}let t=B(T({},this.applyData),{amount:this.MIN_AMOUNT,payment_mode:this.payment_mode,payment_status:this.payment_mode==="COD"?"pending":"paid",transaction_id:""});console.log(t);try{let e=yield this.programServ.applyProgram(t);console.log(e),e&&e.status===200?(localStorage.removeItem("program_apply_data"),yield this.showAlert("\u0906\u092A\u0915\u093E \u0906\u0935\u0947\u0926\u0928 \u0938\u092B\u0932\u0924\u093E\u092A\u0942\u0930\u094D\u0935\u0915 \u0938\u092C\u092E\u093F\u091F \u0939\u094B \u0917\u092F\u093E \u0939\u0948 \u{1F64F}"),this.navCtrl.navigateRoot("/home")):yield this.showAlert(e?.msg||"Something went wrong.")}catch(e){console.error(e),yield this.showAlert("Server error.")}})}showAlert(t){return o(this,null,function*(){yield(yield this.alertCtrl.create({header:"Info",message:t,buttons:["OK"]})).present()})}};i.\u0275fac=function(e){return new(e||i)(P(O),P(E),P(kt))},i.\u0275cmp=H({type:i,selectors:[["app-program-payment"]],decls:6,vars:2,consts:[[1,"ion-padding","home-page"],[4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],[1,"details-section"],[1,"amount-section","ion-text-center"],[1,"ion-text-success"],[3,"ngModelChange","ngModel"],["name","cash-outline","slot","start"],["value","COD"],["name","qr-code-outline","slot","start"],["value","UPI"],["name","card-outline","slot","start"],["value","ONLINE"],["expand","block","color","success",3,"click","disabled"],["name","checkmark-circle-outline","slot","start"],[1,"ion-padding","ion-text-center"],["name","crescent"]],template:function(e,a){e&1&&(s(0,"ion-header"),h(1,"app-header"),r(),s(2,"ion-content",0),F(3,Rt,47,6,"ion-card",1)(4,Nt,4,0,"div",2),h(5,"app-footer"),r()),e&2&&(y(3),S("ngIf",a.applyData),y(),S("ngIf",!a.applyData))},dependencies:[et,st,lt,ut,ct,mt,it,ot,nt,rt,G,X,$,Q,at,gt,dt,Z,Y,_t,bt,pt,ht],styles:[".home-page[_ngcontent-%COMP%]{--ion-background-color: #f4f4f4}ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 12px #0000001a;border-radius:10px;max-width:500px;margin:20px auto}.details-section[_ngcontent-%COMP%]{padding-bottom:15px;border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}.details-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:var(--ion-color-medium)}.amount-section[_ngcontent-%COMP%]{padding:15px 0}.amount-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:700}.amount-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium)}ion-radio-group[_ngcontent-%COMP%]{margin-top:15px}ion-item[_ngcontent-%COMP%]{--inner-border-width: 0;--border-radius: 5px;margin-bottom:5px;box-shadow:0 1px 3px #0000000d}ion-button[_ngcontent-%COMP%]{margin-top:25px}ion-icon[slot=start][_ngcontent-%COMP%]{margin-inline-end:12px}"]});let n=i;return n})();export{te as ProgramPaymentPage};
